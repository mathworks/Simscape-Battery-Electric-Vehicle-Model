var sourceData1 = {"FileName":"C:\\local\\github-issacito12\\fork-bev\\BEV\\BEV_main_script.mlx","RawFileContents":["modelName = \"BEV_system_model\";","","% Load the model file.","load_system(modelName)","","% Set referenced subsystems and load parameters.","BEV_useComponents_Basic","% Load drive cycle.","VehSpdRef_loadSimulationCase_SimpleDrivePattern( ...","  ModelName = modelName, ...","  TargetSubsystemPath = ...","    \"/Controller & Environment\" + ...","    \"/Vehicle speed reference\" )","% Your code goes here.","simOut = sim(modelName);","simData = extractTimetable(simOut.logsout);","fig = BEV_plotResultsCompact( SimData=simData, PlotTemperature=false );","% Save the plot to a PNG file.","prjRoot = currentProject().RootFolder;","imgFilename = \"BEV_SimulationResultPlot.png\";","exportgraphics(fig, fullfile(prjRoot, \"BEV\", \"results\", imgFilename))","% Extract logged signals at once with extractTimetable.","simData = extractTimetable(simOut.logsout);","","% Adjust time format so as not to lose the subsecond information.","simData.Time.Format = 'hh:mm:ss.SSSS';","","% Signal names to save in file.","% These must be specified in the model as signal logging names.","% For example, in the BEV system model, see the Measurement subsystem.","dataColumns = [ ...","  \"HV Battery SOC\", \"HV Battery Power\", \"HV Battery Current\", ...","  \"G-Force\", \"Vehicle Speed (km/hr)\" ];","","% Select the logged signals to save.","simData = simData(:, dataColumns);","","% Add unit information to signal names.","varNames = string(simData.Properties.VariableNames');","% disp(varNames)","varUnits = string(simData.Properties.VariableUnits');","% disp(varUnits)","varNames2 = varNames + \" (\" + varUnits + \")\";","disp(varNames2)","simData.Properties.VariableNames = varNames2;","","% Save data to CSV file.","simResultFilename  = \"BEV_SimulationResult_1.csv\";","simResultFile_FullPath = fullfile(prjRoot, \"BEV\", \"results\", simResultFilename);","writetimetable(simData, simResultFile_FullPath)","prjRoot = currentProject().RootFolder;","simResultFilename  = \"BEV_SimulationResult_1.csv\";","simResultFile_FullPath = fullfile(prjRoot, \"BEV\", \"results\", simResultFilename);","","% Read a CSV file containing simulation result and store it to a timetable.","data = readtimetable(simResultFile_FullPath, VariableNamingRule=\"preserve\");","","% Adjust time format.","data.Time.Format = 's';","","% Separate variable names and unit strings.","varNames_with_unit = data.Properties.VariableNames';","% disp(varNames_with_unit)","varNames = extractBefore(varNames_with_unit, \" (\");","disp(varNames)","varUnits = strings(5, 1);","for idx = 1 : numel(varNames_with_unit)","  % Return value from extractBetween is an N-by-1 cell array","  % for each varNames_with_unit where N could be different.","  % We keep the first element only,","  % we cannot assign them to varUnits at once outside for-loop.","  tmpUnits = extractBetween(varNames_with_unit{idx}, \"(\", \")\");","  varUnits{idx} = tmpUnits{1};","end","disp(varUnits)","data.Properties.VariableNames = varNames;","data.Properties.VariableUnits = varUnits;","","% Define a little utility to manipulate the unit representation","% in Simscape's physical values.","tidyUnit = @(x,u) simscape.Value( value(x,u), u );","t = simscape.Value( seconds(data.Time), 's' );","dt = diff(t);","dataVehSpd = data.(\"Vehicle Speed\");","unitStr = varUnits(varNames == \"Vehicle Speed\");","vehicleSpeed = simscape.Value(dataVehSpd, unitStr{:});","averageSpeed = sum(vehicleSpeed)/numel(vehicleSpeed)","maxSpeed = max(vehicleSpeed)","tmpDistance = sum(vehicleSpeed(2:end).*dt);","travelledDistance = tidyUnit( tmpDistance, \"km\" )","G = data.(\"G-Force\");","min(G), max(G)","dataBattPwr = data.(\"HV Battery Power\");","unitStr = varUnits(varNames == \"HV Battery Power\");","batteryPower = simscape.Value(dataBattPwr, unitStr{:});  % J/s","batteryEnergyUsed = sum(batteryPower(2:end).*dt)","batteryEnergyUsed = tidyUnit(batteryEnergyUsed, \"kW*hr\")","energyEfficiency_kWh_per_100km = 100 * value(batteryEnergyUsed / travelledDistance, \"kW*hr/km\")"],"CoverageDisplayDataPerLine":{"Function":[],"Statement":[{"LineNumber":1,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":4,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":22,"ContinuedLine":false},{"LineNumber":7,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":23,"ContinuedLine":false},{"LineNumber":9,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":10,"Hits":1,"StartColumnNumbers":2,"EndColumnNumbers":23,"ContinuedLine":true},{"LineNumber":11,"Hits":1,"StartColumnNumbers":2,"EndColumnNumbers":23,"ContinuedLine":true},{"LineNumber":12,"Hits":1,"StartColumnNumbers":4,"EndColumnNumbers":33,"ContinuedLine":true},{"LineNumber":13,"Hits":1,"StartColumnNumbers":4,"EndColumnNumbers":32,"ContinuedLine":true},{"LineNumber":15,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":24,"ContinuedLine":false},{"LineNumber":16,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":17,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":71,"ContinuedLine":false},{"LineNumber":19,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":20,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":21,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":69,"ContinuedLine":false},{"LineNumber":23,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":26,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":31,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":15,"ContinuedLine":false},{"LineNumber":32,"Hits":1,"StartColumnNumbers":2,"EndColumnNumbers":60,"ContinuedLine":true},{"LineNumber":33,"Hits":1,"StartColumnNumbers":2,"EndColumnNumbers":39,"ContinuedLine":true},{"LineNumber":36,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":39,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":53,"ContinuedLine":false},{"LineNumber":41,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":53,"ContinuedLine":false},{"LineNumber":43,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":44,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":15,"ContinuedLine":false},{"LineNumber":45,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":48,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":49,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":80,"ContinuedLine":false},{"LineNumber":50,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":51,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":52,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":53,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":80,"ContinuedLine":false},{"LineNumber":56,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":76,"ContinuedLine":false},{"LineNumber":59,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":23,"ContinuedLine":false},{"LineNumber":62,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":52,"ContinuedLine":false},{"LineNumber":64,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":65,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":14,"ContinuedLine":false},{"LineNumber":66,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":67,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":72,"Hits":5,"StartColumnNumbers":2,"EndColumnNumbers":63,"ContinuedLine":false},{"LineNumber":73,"Hits":5,"StartColumnNumbers":2,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":75,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":14,"ContinuedLine":false},{"LineNumber":76,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":41,"ContinuedLine":false},{"LineNumber":77,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":41,"ContinuedLine":false},{"LineNumber":81,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":82,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":46,"ContinuedLine":false},{"LineNumber":83,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":13,"ContinuedLine":false},{"LineNumber":84,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":36,"ContinuedLine":false},{"LineNumber":85,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":86,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":54,"ContinuedLine":false},{"LineNumber":87,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":52,"ContinuedLine":false},{"LineNumber":88,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":28,"ContinuedLine":false},{"LineNumber":89,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":90,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":91,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":92,"Hits":[1,1],"StartColumnNumbers":[0,8],"EndColumnNumbers":[6,14],"ContinuedLine":false},{"LineNumber":93,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":94,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":95,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":55,"ContinuedLine":false},{"LineNumber":96,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":97,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":56,"ContinuedLine":false},{"LineNumber":98,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":95,"ContinuedLine":false}]}}